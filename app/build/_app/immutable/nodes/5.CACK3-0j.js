import{f as pt,a as lt}from"../chunks/sc5tX4ha.js";import"../chunks/CY-KoamU.js";import{o as ut,a as ct}from"../chunks/Dglfn3Y6.js";import{N as dt,Q as a,R as gt,S as ft,T as _t,U as i,g as r,m as n,s,V as p,W as mt}from"../chunks/8qVaMlJz.js";import{s as l}from"../chunks/DEAL1xtT.js";import{e as H}from"../chunks/D6Xv_Zl9.js";import{i as Dt}from"../chunks/Cwkaved6.js";import{s as yt,a as ht}from"../chunks/BGbV5fOR.js";import{p as $t}from"../chunks/SNLjDedc.js";import{i as h,t as Et}from"../chunks/C1V3-PH7.js";import{g as xt}from"../chunks/DbnA_IQn.js";const Rt=!0,Ut=Object.freeze(Object.defineProperty({__proto__:null,prerender:Rt},Symbol.toStringTag,{value:"Module"}));var q;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(q||(q={}));async function Wt(e,u){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(e,u),await h("plugin:event|unlisten",{event:e,eventId:u})}async function vt(e,u,M){var _;const $=(_=void 0)!==null&&_!==void 0?_:{kind:"Any"};return h("plugin:event|listen",{event:e,target:$,handler:Et(u)}).then(m=>async()=>Wt(e,m))}var Ot=pt('<h1>Run</h1> <p><strong>Mode:</strong> </p> <p><strong>Target:</strong> </p> <h2>Status</h2> <p><strong>Started:</strong> </p> <p><strong>Finished:</strong> </p> <h2>Progress</h2> <p><strong>Completed:</strong> </p> <p><strong>Current:</strong> </p> <p><strong>ETA:</strong> </p> <div style="display:flex; gap: 8px; margin: 12px 0;"><button>Cancel</button> <button>View results</button> <a href="/">Back</a></div> <h2>Log</h2> <pre style="border: 1px solid #ddd; border-radius: 8px; padding: 12px; max-height: 420px; overflow: auto;"> </pre>',1);function Vt(e,u){dt(u,!1);const M=()=>ht($t,"$page",_),[_,$]=yt();let m=n("url"),E=n(""),c=n(!1),x=n([]),d=n(),L,P=n(0),G=n(0),U=n(""),V=n(""),R=n(),k=n(!1),W=n(!1);const g=t=>{s(x,[...r(x),t].slice(-500))},z=t=>typeof t=="object"&&t!==null,J=t=>z(t)?typeof t.type=="string"&&typeof t.ts=="string":!1,T=t=>{const f=Math.max(0,Math.floor(t/1e3)),D=Math.floor(f/60),y=f%60;return D<=0?`${y}s`:`${D}m ${y}s`},Q=t=>{if(t.type==="run_started"){s(k,!0),s(W,!1),t.outputDir&&s(d,t.outputDir);return}if(t.type==="progress"){s(P,t.completed),s(G,t.total),s(U,t.path),s(V,t.device),s(R,t.etaMs);return}t.type==="run_completed"&&(s(W,!0),s(c,!1),t.outputDir&&s(d,t.outputDir))},Y=async()=>{if(r(c))return;s(c,!0),g("Starting...");const t=await h("start_run",{mode:r(m),value:r(E)});s(d,t.outputDir)},Z=async()=>{r(c)&&(await h("cancel_run"),g("Cancel requested."))};ut(async()=>{const t=M().url.searchParams,f=t.get("mode"),D=t.get("value");f==="folder"&&s(m,"folder"),s(E,D??""),L=await vt("engine_event",y=>{const o=y.payload;if(J(o)){if(Q(o),o.type==="progress"){const it=o.etaMs===void 0?"":` ETA ${T(o.etaMs)}`;g(`progress ${o.completed}/${o.total} ${o.path} [${o.device}]${it}`)}else g(JSON.stringify(o));return}if(typeof o=="string"){g(o);return}g(JSON.stringify(o))}),await Y()}),ct(()=>{L?.()});const K=()=>{r(d)&&xt(`/results?outputDir=${encodeURIComponent(r(d))}`)};Dt();var j=Ot(),v=a(gt(j),2),X=a(i(v));p(v);var O=a(v,2),tt=a(i(O));p(O);var b=a(O,4),et=a(i(b));p(b);var N=a(b,2),rt=a(i(N));p(N);var A=a(N,4),at=a(i(A));p(A);var S=a(A,2),st=a(i(S));p(S);var C=a(S,2),ot=a(i(C));p(C);var I=a(C,2),w=i(I),B=a(w,2);mt(2),p(I);var F=a(I,4),nt=i(F,!0);p(F),ft((t,f)=>{l(X,` ${r(m)??""}`),l(tt,` ${r(E)??""}`),l(et,` ${r(k)?"yes":"no"}`),l(rt,` ${r(W)?"yes":"no"}`),l(at,` ${r(P)??""}/${r(G)??""}`),l(st,` ${r(U)??""} [${r(V)??""}]`),l(ot,` ${t??""}`),w.disabled=!r(c),B.disabled=r(c)||!r(d),l(nt,f)},[()=>r(R)===void 0?"â€”":T(r(R)),()=>r(x).join(`
`)]),H("click",w,Z),H("click",B,K),lt(e,j),_t(),$()}export{Vt as component,Ut as universal};
